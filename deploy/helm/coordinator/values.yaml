# Coordinator Helm Chart Values
replicaCount: 1

image:
  repository: coordinator
  tag: latest
  pullPolicy: IfNotPresent

service:
  type: ClusterIP
  port: 8080

ingress:
  enabled: false
  className: ""
  annotations: {}
  hosts: []
  tls: []

resources:
  requests:
    memory: 128Mi
    cpu: 50m
  limits:
    memory: 256Mi

persistence:
  enabled: true
  size: 1Gi
  mountPath: /data

litestream:
  enabled: false
  image:
    repository: litestream/litestream
    tag: "0.3.13"
  s3Bucket: ""
  s3Region: "us-west-2"
  s3Endpoint: ""
  s3ForcePathStyle: false
  syncInterval: "10s"
  retention: "168h"
  snapshotInterval: "1h"
  # Database paths to replicate
  databases:
    - name: bitcoin
      path: /data/bitcoin.db
      s3Path: bitcoin.db
    - name: competitions
      path: /data/competitions.db
      s3Path: competitions.db
    - name: users
      path: /data/users.db
      s3Path: users.db

keymeld:
  url: "http://keymeld.keymeld.svc.cluster.local:8080"

lnd:
  host: "lnd1"
  rpcPort: 10009
  macaroonPath: /lnd/admin.macaroon
  tlsCertPath: /lnd/tls.cert
  # Init container copies creds from LND pod PVC (for regtest)
  initContainer:
    enabled: false
    image: busybox:1.36
    sourcePvc: lnd1-data

bitcoin:
  rpcHost: "bitcoind"
  rpcPort: 18443
  rpcUser: "bitcoin"
  rpcPassword: "bitcoinpass"

oracle:
  url: "http://noaa-oracle.oracle.svc.cluster.local:8080"

config:
  logLevel: info
  dbPath: /data/coordinator.db

# Secrets configuration
secrets:
  privateKey:
    create: false
    value: ""
  lnd:
    create: false
    # Base64-encoded macaroon and tls cert (for production)
    macaroon: ""
    tlsCert: ""

# Dev mode configuration for fast local development
# Uses locally-compiled cargo binaries instead of container images
devMode:
  enabled: false
  # Path to the binary inside the k3d node (mounted from host)
  hostPath: /mnt/coordinator/coordinator
  # Base image for running the binary (must have libc, ssl, etc.)
  baseImage: debian:bookworm-slim
